(()=>{"use strict";class e{constructor(e,t){this.name=e,this.set=[],this.set.push(t)}addItem(e){this.set.push(e)}}class t{constructor(e,t,n){this.name=e,this.note=t,this.checkbox=n}}class n{constructor(e,t){this.name=e,this.wardrobe=[],void 0!==t&&this.wardrobe.push(t)}getName(){return this.name}addWardobeItem(n,o,a,i){this.wardrobe.push(new e(n,new t(o,a,i)))}getWardrobeItem(e){console.log(e),this.wardrobe.forEach((t=>{e===t.name?t.set.forEach((e=>{console.log(`the item/s you were looking for is: ${e.name} note:${e.note} `)})):console.log(`no items found under the name ${e}`)}))}getAllWardrobeForPerson(){this.wardrobe!==[]?this.wardrobe.forEach((e=>{e.set.forEach((t=>{console.log(`${e.name} name: ${t.name}. note: ${t.note}.`)}))})):console.log("no items to show")}}const o=document.getElementById("container"),a=document.getElementById("hikersContainer"),i=new class{save(e,t){localStorage.setItem(e,JSON.stringify(t))}saveB(n,o){const a=this.loadOne(n);a.wardrobe===o[0]?a.wardrobe[o[0]].push(new t(o[1],o[2])):a.wardrobe.push(new e(o[0],new t(o[1],o[2]))),this.save(n,a)}modify(e,t,n){const o=this.loadOne(e);if(void 0===t)return o.name=n,this.save(n,o),void this.remove("a",e);!0===n||!1===n?o.wardrobe.forEach((a=>{a.set.forEach((e=>{e.name==t[0]&&e.note==t[1]&&(e.checkbox=n)})),this.save(e,o)})):o.wardrobe.forEach((a=>{a.set.forEach((e=>{e.name===t[0].textContent&&(e.name=n[0],e.note=n[1])})),this.save(e,o)}))}load(){const e=[];0===localStorage.length&&this.createDEMOElements();for(let t=0;t<localStorage.length;t++)e.push(Object.assign(JSON.parse(localStorage.getItem(localStorage.key(t)))));return e}createDEMOElements(){const o=new n("Santi(Demo)",new e("Top",new t("Foldable hat","wide brim",!0)));o.addWardobeItem("Top","Bandana","cotton",!0),o.addWardobeItem("Body","Decathlon T-Shirt","easy dry",!1),o.addWardobeItem("Body","Hoodie","for walking",!0),o.addWardobeItem("Body","Hoodie","for resting",!1),o.addWardobeItem("Bottom","Hiking Trowsers","can be long/shorts",!1),o.addWardobeItem("Bottom","Shorts","for resting",!0),o.addWardobeItem("Extra","Wireless speaker","+cracked Spotify. remember phone data plan",!1),localStorage.setItem(o.getName(),JSON.stringify(o));const a=new n("Ennio(Demo)",new e("Top",new t("baseball cap","x2",!1)));localStorage.setItem(a.getName(),JSON.stringify(a));const i=new n("Francesco(Demo)",new e("Shoes",new t("hiking shoes","",!1)));this.save(i.getName(),i);const r=new n("Alessio(Demo)",new e("Extra",new t("External Charger","plus cables",!0)));r.addWardobeItem("Extra","Hiking poles","x2",!0),this.save(r.getName(),r)}consoleLogLocalStorage(){for(let e=0;e<localStorage.length;e++){const t=JSON.parse(localStorage.getItem(localStorage.key(e)));console.log(t)}}remove(e,t){if("a"===e&&localStorage.removeItem(t),"b"===e){const e=this.loadOne(t[0]);e.wardrobe.forEach(((n,o)=>{n.set.forEach((n=>{n.name===t[1]&&(delete e.wardrobe[o],e.wardrobe=e.wardrobe.filter((function(e){return e})))}))})),this.save(t[0],e)}}loadOne(e){for(let t=0;t<localStorage.length;t++){const n=JSON.parse(localStorage.getItem(localStorage.key(t)));if(e===n.name)return n}return 0}};!function(){function e(){i.load().forEach((e=>{const n=t(e.name,"hiker");for(let o=0;o<e.wardrobe.length;o++){let a=document.createElement("div");const i=e.name+"_"+e.wardrobe[o].name;a=null===document.getElementById(i)?t([i,e.wardrobe[o].name],"wardrobe"):document.getElementById(i);let r=t([[e.wardrobe[o].set[0].name],[e.wardrobe[o].set[0].note],[e.wardrobe[o].set[0].checkbox]],["item",e.name]);a.appendChild(r),n.appendChild(a)}a.appendChild(n)}))}function t(t,n){const o=document.createElement("div");if(o.style.overflowX="auto","hiker"===n&&(o.setAttribute("id",t),o.setAttribute("class","hiker"),o.textContent=t,o.appendChild(l(t)),o.appendChild(r(t)),o.appendChild(function(){const e=document.createElement("img");return e.setAttribute("id","addWardrobe"),e.setAttribute("title","add an element to the hiker"),e.src="img/add.png",e.addEventListener("click",(e=>{e.target.parentElement.appendChild(function(e){const t=document.createElement("div");t.setAttribute("id","element");const n=document.createElement("select");n.setAttribute("id","select");const o=document.createElement("option"),a=document.createElement("option"),r=document.createElement("option"),d=document.createElement("option"),c=document.createElement("option");o.textContent="Head",a.textContent="Body",r.textContent="Bottom",d.textContent="Shoes",c.textContent="Extra",n.appendChild(o),n.appendChild(a),n.appendChild(r),n.appendChild(d),n.appendChild(c);let m=document.createElement("INPUT");m.setAttribute("type","text"),m.setAttribute("id","inputName");let p=document.createElement("INPUT");p.setAttribute("type","text"),p.setAttribute("id","inputNote");let u=document.createElement("button");return u.textContent="Confirm",u.setAttribute("id","confirm"),u.setAttribute("title","confirm selection"),u.addEventListener("click",(o=>{if(""!=p.value&&""!=m.value){const o=e,a=n.value,r=m.value,d=p.value,s=document.createElement("div");s.textContent=a+": "+r+" // "+d,i.saveB(o,[a,r,d]),s.appendChild(l()),document.getElementById(e).appendChild(s),t.remove(),m.value=p.value=""}s()})),t.appendChild(n),t.appendChild(m),t.appendChild(p),t.appendChild(u),t.appendChild(l()),t}(e.target.parentElement.id))})),e}()),o.appendChild(d()),a.appendChild(o)),"wardrobe"===n&&(o.setAttribute("id",t[0]),o.setAttribute("class",t[1]),o.setAttribute("class","panel"),o.textContent=t[1],o.style.border="1px solid orange",o.appendChild(d())),"item"===n[0]){const e=document.createElement("label"),a=document.createElement("label"),d=document.createElement("label");o.setAttribute("id","item"),e.setAttribute("id","text1"),a.setAttribute("id","text2"),d.setAttribute("id","breaker"),e.textContent=t[0],d.textContent=" // ",a.textContent=t[1],o.appendChild(e),o.appendChild(d),o.appendChild(a),o.appendChild(l(n[1])),o.appendChild(r(n[1])),o.appendChild(function(e,t){const n=document.createElement("img");return 1==t[0]?(n.src="img/checkboxY.png",n.setAttribute("id","checkboxY")):(n.src="img/checkboxN.png",n.setAttribute("id","checkboxN")),n.setAttribute("title","tick to confirm availability"),n.style.width="14px",n.addEventListener("click",(t=>{if("checkboxN"==t.target.id){t.target.id="checkboxY",t.target.src="img/checkboxY.png";const n=t.target.parentNode.childNodes;i.modify(e,[n[0].textContent,n[2].textContent],!0)}else{t.target.id="checkboxN",t.target.src="img/checkboxN.png";const n=t.target.parentNode.childNodes;i.modify(e,[n[0].textContent,n[2].textContent],!1)}s()})),n}(n[1],t[2]))}function r(e){const t=document.createElement("img");function n(e,t){const n=document.createElement("div");let o=document.createElement("INPUT");o.setAttribute("type","text"),o.setAttribute("id","inputField1");let a=document.createElement("INPUT");a.setAttribute("type","text"),a.setAttribute("id","inputField2");let r=document.createElement("button");return r.textContent="OK",r.setAttribute("title","confirm change"),0==e.length?(o.value=t,n.appendChild(o),n.appendChild(r),n.appendChild(l()),r.addEventListener("click",(()=>{t!=o.value&&(i.modify(t,void 0,o.value),s())}))):(o.value=e[0].textContent,a.value=e[1].textContent,n.appendChild(o),n.appendChild(a),n.appendChild(r),n.appendChild(l()),r.addEventListener("click",(()=>{let n=document.getElementById("inputField1").value,o=document.getElementById("inputField2").value;i.modify(t,e,[n,o]),s()}))),n}return t.setAttribute("class",e),t.setAttribute("id","modify"),t.setAttribute("title","modify the tab"),t.src="img/modify.png",t.addEventListener("click",(e=>{!function(e){const t=[],o=e.target.className;if(e.target.parentNode.childNodes.forEach((e=>{"label"==e.localName&&"breaker"!=e.id&&t.push(e)})),0==t.length)document.getElementById(o).appendChild(n(t,o));else{const a=e.target.parentNode.parentNode.childNodes;a[a.length-1].appendChild(n(t,o))}}(e)})),t}function l(e){const t=document.createElement("img");return t.textContent="X",t.style.color="red",t.src="img/remove.png",t.style.height="15px",t.setAttribute("id","remove"),t.setAttribute("class",e),t.setAttribute("title","remove the element"),t.style.float="right",t.style.display="inline-block",t.addEventListener("click",(e=>{if("remove"==e.target.id&&"item"==e.target.parentElement.id){e.target.parentElement.style.display="none";const t=[];e.target.parentNode.childNodes.forEach((e=>{"label"==e.localName&&"breaker"!=e.id&&t.push(e.textContent)})),i.remove("b",[e.target.className,t[0],t[1]])}else e.target.parentElement.style.display="none",i.remove("a",e.target.className);s()})),t}function d(){const e=document.createElement("img");return e.src="img/collapse.png",e.style.height="15px",e.setAttribute("id","collapse"),e.setAttribute("title","collapse the tab"),e.style.float="right",e.style.display="inline-block",e.addEventListener("click",(t=>{!function(t){var n=t.target.parentElement;n.classList.toggle("active");var o=n.children;for(let t=0;t<o.length;t++)"block"===o[t].style.display&&"div"==o[t].localName&&"collapse"!=o[t].id?(o[t].style.display="none",e.src="img/expand.png",e.setAttribute("title","expand the tab")):(o[t].style.display="block",e.src="img/collapse.png",e.setAttribute("title","collapse the tab"))}(t)})),e}function s(){for(;a.firstChild;)a.removeChild(a.firstChild);e()}return o}!function(){const e=document.createElement("div");e.style.display="none";let a=document.createElement("img");a.setAttribute("id","addButton"),a.setAttribute("title","click to add a new hiker"),a.src="img/addHiker.png";let r=document.createElement("button");r.setAttribute("title","confirm name"),r.setAttribute("id","okButton"),r.textContent="OK";let l=document.createElement("input");l.setAttribute("id","inputField"),l.setAttribute("type","text"),l.setAttribute("placeholder","create a new Hiker"),l.required=!0,l.minLength=3,l.maxLength=20,e.appendChild(l),e.appendChild(r),o.appendChild(a),o.appendChild(e),a.addEventListener("click",(()=>{"none"==e.style.display?e.style.display="flex":e.style.display="none"})),r.addEventListener("click",(()=>{l.validity.valid?(t(l.value,"hiker"),i.save(l.value,new n(l.value)),l.value="",e.style.display="none"):(r.setCustomValidity("invalid name"),r.reportValidity())}))}(),e()}()})();